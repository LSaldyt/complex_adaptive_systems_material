\documentclass[letterpaper]{article}
\usepackage{natbib,alifeconf}
\newcommand\tab[1][1cm]{\hspace*{#1}}

\usepackage{xcolor}
\usepackage{amsmath}

\makeatletter
\def\mcolor#1#{\@mcolor{#1}}
\def\@mcolor#1#2#3{%
  \protect\leavevmode
  \begingroup
    \color#1{#2}#3%
  \endgroup
}
\makeatother

\newcommand{\annotate}[3]{
\mcolor{#1}{\overbrace{#3}^\text{#2}}
}

\newcommand{\sitem}[1]
{
    \begin{itemize}
        \item #1
    \end{itemize}
}

\definecolor{orange}{HTML}{f7c767}
\definecolor{blue}{HTML}{67E6F7}
\definecolor{green}{HTML}{bdf767}
\definecolor{purple}{HTML}{f467f7}
\definecolor{red}{HTML}{fc4475}

\usepackage{tikz}
\usetikzlibrary{arrows.meta}

\title{Report for Complex Adaptive Systems}
\author{Lucas Saldyt}

\begin{document}
\maketitle

\begin{abstract}
    Ants of the genus Temnothorax display the captivating ability to choose optimally between nest sites in an entirely decentralized, error correcting, and self-organizing process.
    First, this paper reviews previous models of Temnothorax decision making, and simplifies and then analyzes them.
    Specifically, it shows that previous agent based models can be expressed with far fewer states and transitions. 
    It also extends previous models of population dynamics.
    Secondly, this paper aims to evaluate the applications of this behavior to computer science.
\end{abstract}

\section{Introduction}

Temnothorax nest choice is worth studying because decentralized and self-organizing algorithms are  

\subsection{Summary (Mallon 2001)}

Nest choice is deeper than may initially seem.
First of all, Temnothorax Albipennis colonies generally have relatively small sizes [TODO: Cite estimate], which in theory limits decision making ability [TODO: Cite mallon 2001], but in practice does not. 
Ants are able to use graded assessment to make decisions efficiently even though their colony size is small.

Additionally, a small number of comparisons are actually made between colonies. 
Mallon 2001 publishes three experiments with $86\%, 46\%$ and $32\%$ direct comparison, which indicates the presence of decentralized behavior.
Ants seem to use peer rate estimation to decide on the quality of a particular colony: instead of counting the number of ants at a colony, they estimate the total number from the frequency of ants (if many ants are seen over a brief period of time, then an ant knows that the current location has a large number of ants).

%% \begin{itemize}
%%     \item How does small colony size affect decision making?
%%         \sitem{\mcolor{red}{Graded assessment} affects the colony feedback loop}
%%     \item What proportion of comparison is by individuals as opposed to at the colony level? 
%%     \sitem{\mcolor{red}{$86\%, 46\%, 32\%$} for different colonies.}
%%     \sitem{Direct comparison is \mcolor{red}{not crucial} for choosing the optimal site and therefore the decision is \mcolor{red}{decentralized}}
%%     \item What physical observations act as cues for behavior? 
%%         \sitem{\mcolor{red}{Nestmate interaction rate} for estimation of colony/environment state}
%% \end{itemize}

When deciding on nests, ants actually use a variety of different recruiting mechanisms: Direct tandem runs (leading of other ants), transportations (carrying of other ants), and reverse tandem runs (leading of other ants, but in the opposite direction). 
Early work set out to describe the purpose and importance of each of these mechanisms.

\subsection{Summary (Pratt 2002, 2005)}

Each recruitment mechanism has different advantages. Tandem running allows learning of the route to a nest as well as the deposition of pheromones along the route. 
Later in the decision process, ants switch to ``transport`` recruitment, where they literally carry other ants. 
This mechanism triggers when ants know that a destination nest has a large number of ants (is above the quorum, or threshold, which is estimated by encounter rate).

Faster recruitment to better sites allows decentralized optimal choice without direct comparison.
In other words, when an ant encounters a good site, it recruits to that site very quickly, which causes positive feedback when subsequent ants encounter and recruit to the same site.
This can be seen in the population equations from [TODO cite Pratt 2002], where incoming ants depend on the number of recruiting ants.

%%        \begin{itemize}
%%            \item What is the purpose of multiple recruitment mechanisms? (Pratt 2002, 2005)
%%                \sitem{Tandem runs allow route learning and pheromone depositing}
%%                \sitem{\mcolor{red}{Graded commitment} allows error-correction and optimal decision making.}
%%                \sitem{Recruitment \mcolor{red}{accelerates} when transport begins ($3x$ speed)}
%%            \item How do individuals choose between recruitment mechanisms? (Pratt 2005)
%%                \sitem{Transports preffered once \mcolor{red}{quorum} is met}
%%            \item How does decentralization happen without direct comparison? (Pratt 2005)
%%                \sitem{Recruit to better sites faster $\rightarrow$ \mcolor{red}{positive feedback}}
%%        \end{itemize}

Reverse tandem runs had no single explaining mechanism, but it was hypothesized that they either stimulated transport by idle workers, or fixed nest-splitting that would be more common in nature than in the lab.
The quorum requirement seems to assist the ants in making optimal choices by acting as a general error correction mechanism --- it delays decision making in case ants have chosen a sub-optimal nest, and this decreases the likelihood of colony splitting.


%%       \begin{itemize}
%%               \sitem{Selection of an individual ant's ``home`` nest}
%%           \item How is quorum detected?
%%               \sitem{Ants likely use \mcolor{red}{rate estimation} rather than literal counting}
%%           \item \mcolor{red}{\em{Important parts of the decision process occur at the individual level}}
%%       \end{itemize}
\section{Previous models}

  \subsection{2002 Model Overview}
  S.Pratt 2002 contains an ODE model, which models a colony of $N$ ants, where proportion $p$ are active. \\
      $M$ sites (in practice $~2-12$ sites). \\
      Four population classes: 
      \begin{itemize}
          \item $S$: Searching (At destroyed nest or between nests) \mcolor{black}{(Initially $Np$)}
          \item $A_i$: Assessing a nest $i$ \mcolor{black}{(Initially 0)}
          \item $R_i$: Recruiting to a nest $i$ \mcolor{black}{(Initially 0)}
          \item $P_i$: The passive population at nest i \mcolor{black}{($P_0 = N(1-p), P_i = 0$)}
      \end{itemize}

  \subsection{Overview of Pratt 2002 Equations (Colors showing flow of ant population)}
      \Large
      \begin{equation}
      \begin{aligned}
          & \frac{ds}{dt} = - \sum_{j=1}^m \mcolor{black}{u_js} - \sum_{j=1}^m \mcolor{black}{\lambda_ji(r_j, s)} \\
          & \frac{da_i}{dt} = \mcolor{black}{u_is} + \mcolor{black}{\lambda_ji(r_j, s)} + \sum_{j \neq i}^m \mcolor{black}{(\rho_{ji}a_j - \rho_{ij}a_i)} - \mcolor{black}{k_ia_i} \\
          & \frac{dr_i}{dt} = \mcolor{black}{k_ia_i} + \sum_{j \neq i}^m \mcolor{black}{(\rho_{ji}r_j - \rho_{ij}r_i)} \\
          & \frac{dp_i}{dt} = \annotate{black}{causes overflow if unchecked}{\phi_ij(r_i, p_0)} - \annotate{black}{fix: subtract moved ants}{\phi_{dest}j(r_{dest},p_0)}
      \end{aligned}
      \end{equation}
  \subsection{Search population}
      \Large
      \begin{multline}
      \frac{dS}{dt} = - \sum_{j=1}^M \annotate{black}{Rate of finding nest $j$}{u_j}*S \\  
      - \sum_{j=1}^M \annotate{black}{Ants led by tandem run}{\lambda_jI(R_j, S)} 
      \end{multline}
  \subsection{Assessment population}
      \Large
      \begin{multline}
      \frac{dA_i}{dt} = \annotate{black}{Ants that find nest $i$ and begin assessing it}{u_iS} \\ 
      + \annotate{black}{Ants led by tandem run}{\lambda_jI(R_j, S)} \\
      + \sum_{j \neq i}^M \annotate{black}{Ants encountering alternative sites}{(\rho_{ji}A_j - \rho_{ij}A_i)} \\ 
      - \annotate{black}{Ants that become recruiters}{k_iA_i} \\
      \end{multline}
  \subsection{Recruitment population}
      \Large
      \begin{multline}
          \frac{dR_i}{dt} = \annotate{black}{Ants that become recruiters}{k_iA_i} \\
          + \sum_{j \neq i}^M \annotate{black}{Ants encountering alternative sites}{(\rho_{ji}R_j - \rho_{ij}R_i)}
      \end{multline}
  \subsection{Passive population}
      \Large
      \begin{equation}
          \frac{dP_i}{dt} = \underbrace{\annotate{black}{Per capita transport rate}{\phi_i} * \annotate{black}{Quorum requirement}{J(R_i, P_0)}}_\text{Carried passive ants}
      \end{equation}
  \subsection{Auxilary Functions}
      \Large
      Tandem/Carrying switching rule:
      \begin{equation}
          I(R_i, S) = 
          \begin{cases}
              & R_i,  \text{ if } \annotate{black}{Recruiters below threshold}{R_i < T} \\
              &       \text{     and } \annotate{black}{While there are recruitable ants}{S > 0}\\
              & 0, \text{ otherwise}
          \end{cases}
      \end{equation}

  \subsection{Auxilary Functions}
      \Large
      Quorum rule:
      \begin{equation}
          J(R_i, P_0) = 
          \begin{cases}
              & 0,  \text{ if } \annotate{black}{Recruiters below threshold}{R_i < T} \\  
              &     \text{     or } \annotate{black}{Edge case: migration has finished}{P_0 = 0}\\
              & R_i, \text{ otherwise}
          \end{cases}
      \end{equation}

  \subsection{Assumptions}
      \begin{itemize}
          \item Ants always move exclusively out of the searching state
          \item Finding/Recruitment/Switching/Conversion rates are all constant per nest
          \item Requires detailed parameter estimation
      \end{itemize}

  \subsection{Diagram of ODE model (Pratt 2002)}

  \subsection{The agent based model (Pratt 2005)}

  \subsection{Important differences between the models (In order of subjective importance)}
      \begin{itemize}
          \item Ants remember their ``home`` nest.
          \item Commitment level is separated from individual actions 
              \sitem{(i.e. an ant can follow even in the committed state)}
              \sitem{Also allows for further parameterization}
          \item Intentionally makes the model more brittle so that it can be further tested empirically. 
              \sitem{A general model is potentially harder to disprove}
          \item Adds a simple ``at-nest`` action 
          \item Minute differences (potential for ants to get lost)
      \end{itemize}

  \section{Proposed Ordinary Differential Equation Model}

  The proposed model begins with an improved set of ordinary differential equations, based on [TODO: Cite Pratt 2002].
  It contains equations for five separate populations: 
  \begin{itemize}
      \item $S$, the searching population (not at any nest)
      \item $A_i$, the assessing population at nest $i$
      \item $L_i$, the leading (forward-tandem-running) population at nest $i$
      \item $C_i$, the carrying (transport) population at nest $i$
      \item $P_i$, the passive population at nest $i$. 
  \end{itemize}
  The model focuses on the following:
  \begin{itemize}
      \item Splitting the $R_i$ population from S. Pratt 2002 into the $L_i$ and $C_i$ populations.
      \item Replacing the two switching equations $I()$ and $J()$ with dynamics switching between $L_i$ and $C_i$ based on a single switching equation $Q()$.
      \item Fixing unchecked growth in the original $P_i$ equations.
      \item Allowing transport of various passive populations, which will allow a split passive population to be fixed.
      \item Replacing switching in $A_i$ and $R_i$ with transitions to searching population. This reflects updates in S.Pratt 2005 and Granovskiy 2012 agent-based models.
      \item Adding transportation of the active searching population (but not the assessing, leading, or carrying populations).
  \end{itemize}

  Given $N$ ants, where proportion $p$ are active, the initial states are the following:
  \begin{itemize}
      \item $S = pN$
      \item $P_0 = (1-p)N$ 
      \item $A_i, L_i, C_i, P_i = 0$ 
  \end{itemize}

  The original model used the following parameters:\\

\begin{tabular}{ l | r }
    \hline
  $\mu_i$     & Likelihood of finding nest $i$\\
  $\lambda_i$ & Proportion led by leaders to $i$\\
  $\rho_{ij}$ & Switching rates between nests $i$ and $j$\\
  $k_i$       & Acceptance probability for nest $i$\\
  $\phi_i$    & Rate for carrying passive ants to nest $i$\\
    \hline
\end{tabular} \\

The updated model builds on this list, but renames old parameters to make them more intuitive: \\

\begin{tabular}{ l | c | r }
    \hline
  Name          & 2002        & Description (units = rate)\\ \hline
  $\phi_i$      & $\mu_i$     & Finding nest $i$\\
  $\lambda_i$   & $\lambda_i$ & Led by leaders to $i$\\
  T             & T           & Threshold (positive integer)\\
  $\alpha_i$    & $k_i$       & Assessors who accept nest $i$\\ \hline
  $\tau_{Pi}$   & $\phi_i$    & Passive ants are transported to $i$\\
  $\tau_{Si}$   & \em{New}    & Searching ants are transported to $i$\\ \hline
  $\sigma_{Ai}$ & \em{New}    & Assessing ants enter search from $i$\\
  $\sigma_{Li}$ & \em{New}    & Leading ants enter search from $i$\\
  $\sigma_{Ci}$ & \em{New}    & Carrying ants enter search from $i$\\
  \hline
\end{tabular} \\

%% For clarity, the following table relates parameters in this model to the parameters in [TODO: Cite Spratt 2005 and grav 2012]\\
%% 
%% \begin{tabular}{ l | r }
%%     \hline
%%     Name & 2005 \\ \hline
%%   $\phi_i$      &  \\
%%   $\lambda_i$   &  \\
%%   T             &  \\
%%   $\alpha_i$    &  \\ \hline
%%   $\tau_{Pi}$   &  \\
%%   $\tau_{Si}$   &  \\ \hline
%%   $\sigma_{Ai}$ &  \\
%%   $\sigma_{Li}$ &  \\
%%   $\sigma_{Ci}$ &  \\
%%   \hline
%% \end{tabular} \\

Based on these parameters, the new equations are:
\begin{equation}
\begin{aligned}
  & \frac{dS}{dt}   = \sum {-\phi_iS - \lambda_iL_iS + \tau_{Pi}C_iS + \sigma_{Ai}A_i + \sigma_{Li}L_i + \sigma_{Ci}C_i} \\\\
  & \frac{dA_i}{dt} = \phi_iS + \lambda_iL_iS + \tau_{Pi}C_iS - \sigma_{Ai}Ai - \alpha_iA_i \\\\
  & \frac{dL_i}{dt} = (1-Q(i))\alpha_iA_i - Q(i)L_i + (1 - Q(i))C_i - \sigma_{Li}L_i \\\\
  & \frac{dC_i}{dt} = Q(i)\alpha_iA_i - (1 - Q(i))C_i + Q(i)L_i - \sigma{Ci}C_i \\\\
  & \frac{dP_i}{dt} = \sum_{j \neq i} [\tau_{Pi}P_jC_i - \tau_{Pj}P_iC_j]\\\\
  & Q(i) = 0, \text{if    } \sum (A_i + L_i + C_i + P_i) \leq T \\
  & Q(i) = 1, \text{otherwise} \\
\end{aligned}
\end{equation}

These equations do not account for reverse tandem runs, but could be modified easily to do so (especially once tandem runs are better understood).

  \subsection{Bibliography}
      \bibliography{sources/insects,sources/brains,sources/ant_system,sources/networks,sources/misc}

\footnotesize
\bibliographystyle{apalike}
\bibliography{sample}


\end{document}
